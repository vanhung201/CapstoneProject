
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    <link href="~/assets/User/assets/css/form.css" rel="stylesheet" />
}

<main>
    <div id="bg-bread">
        <div class="overlay-bread"></div>
        <div class="container">
            <div class="left">
                <div class="d-flex align-middle mb10">
                    <h3 class="text-h2">Danh Sách Ứng Tuyển</h3>
                </div>

            </div>
        </div>
    </div>

    <section class="mt30">
        <div class="container mb30">
            <table id="table1" class="display" width="100%">
                <thead>
                    <tr>
                        <th class="text-center">STT</th>
                        <th class="text-center">Tên Doanh Nghiệp</th>
                        <th class="text-center">Vị Trí</th>
                        <th class="text-center">Trạng Thái</th>
                        <th class="text-center" width="40%">Thông Tin</th>
                    </tr>
                </thead>
            </table>
        </div>
    </section>

    <form class="form" id="updateForm" method="post">
        <div class="form-container">
            <h1 class="form-heading mb15">Thông Tin Ứng Tuyển</h1>
            <div class="row">
                <div class="form-group">
                    <label for="comment" class="form-label">Họ và tên</label>
                    <input list="" name="MentorPoint" id="FullName" class="form-input" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">Email</label>
                    <input name="Email_Mentor" id="Email" class="form-input" autocomplete="off" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">Tên doanh nghiệp</label>
                    <input list="" name="Businessname" id="BusinessName" class="form-input" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">Trạng thái</label>
                    <input list="" name="MentorComment" id="status" class="form-input" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">Vị trí thực tập</label>
                    <input name="Position" id="PositionName" class="form-input" autocomplete="off" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">CV</label>
                    <input list="" name="CV" id="CV" class="form-input" disabled />
                </div>
                <div class="form-group">
                    <label for="comment" class="form-label">Nhận xét</label>
                    <input list="" name="BusinessComment" id="Comment" class="form-input" disabled />
                </div>
            </div>
            <div class="form-group mt15 text-right">
                <a class="btn btn--cancel btn-error text-white">
                    Hủy
                </a>
                <a class="btn btn--confirm btn-success text-white" id="btn--cancel">
                    Xác Nhận
                </a>
            </div>
        </div>
    </form>

</main>
@section Scripts {
    <script>
        $(function () {
            var url = "@Url.Action("getRegList", "Registration")"
            "use strict";
            (dataTable = $("#table1").DataTable({
                ajax: {
                    url: url,
                    type: "GET",
                    dataType: "json",
                    dataSrc: "",
                   /* success: function (res) {
                        console.log(res)
                    }*/
                },
                deferRender: !0,
                columns: [
                    { data: null },
                    { data: "BusinessName" },
                    { data: "PositionName" },
                    { data: "Status" },
                    {
                        data: "ID",
                        render: function (t, e, a) {
                            return (
                                `
                                <a href="@Url.Action("getRegistrationData", "Registration")/${t}" id="business_detail" class="business_detail">
                                <div class="btn btn-update">
                                     <i class="btn-icon btn-icon--detail fal fa-info-circle"></i>
                                </div>
                                </a>
    `
                            );
                        },
                    },
                ],
            }))
            // Create Index column datatable
            dataTable.on("draw.dt", function () {
                dataTable.column(0, { search: "applied", order: "applied" }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            });

        });
        $('#table1').on('click', '.business_detail', function (e) {
            e.preventDefault()
            const form = document.getElementById('updateForm');
            form.classList.add('is-appear');
            const url = $(this).attr('href');
            $.ajax({
                url: url,
                type: "get",
                dataType: 'json',
                success: function (res) {
                    console.log(res)
                    $('#ID').val(res[0].ID)
                    $('#CV').val(res[0].CV)
                    $('#Position').val(res[0].Position)
                    $('#PositionName').val(res[0].PositionName)
                    $('#Email').val(res[0].Email)
                    $('#FullName').val(res[0].FullName)
                    $('#BusinessName').val(res[0].BusinessName)
                    $('#status').val(res[0].status)
                    $('#Comment').val(res[0].Comment)
                }
            })
        })
        $('.btn--cancel').on('click', function () {
            $('#updateForm').removeClass('is-appear')
        })
        $('#btn--cancel').on('click', function () {
            $('#updateForm').removeClass('is-appear')
        })
    </script>
}

