
@model PagedList.IPagedList<BusinessConnectManagement.Models.Post>
@using PagedList.Mvc;

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<main>
    <!---------------------------------------------------
    // Slider :
    //----------------------------------------------->
    <div id="slider">
        <!-- carousel locator -->
        <video id="video-background" autoplay muted loop>
            <source src="https://vhub.vanlanguni.edu.vn/images/banner1.mp4" type="video/mp4">
        </video>
        <div class="form">
            <div class="container">
                <form id="Search" action="">
                    <div class="columns">
                        <div class="column col-3 col-sm-12 col-md-6 col-xl-3 mb10 px-0">
                            <div class="form-group">
                                <input class="form-input" type="text" id="searchString" name="SearchString" placeholder="Tìm việc">
                            </div>
                        </div>
                        <div class="column col-3 col-sm-12 col-md-6 col-xl-3 mb10 px-0">
                            <div class="form-group">
                                <select id="Form" name="Form" class="form-select">
                                    <option value="">Chọn Hình Thức Thực Tập</option>
                                    <option value="Online">Online</option>
                                    <option value="Offline">Offline</option>
                                </select>
                            </div>
                        </div>
                        <div class="column col-3 col-sm-12 col-md-6 col-xl-3 mb10 px-0">
                            <div class="form-group">
                                <select name="Major" class="form-select">
                                    <option value="">Chọn Chuyên Nghành</option>
                                    @foreach (var item in ViewBag.Major)
                                    {
                                        <option value="@item.Major1">@item.Major1</option>
                                    }

                                </select>
                            </div>
                        </div>

                        <div class="column col-3 col-sm-12 col-md-6 col-xl-3 mb10 px-0">
                            <button class="btn btn-error w100" onclick="insertParam()">Tim Kiem</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <section id="job">
        <div class="container">
            <div class="title-home">
                <h3>Công việc nổi bật</h3>
                <a href="@Url.Action("Index", "Posts")">Xem thêm</a>
            </div>

            <div class="columns pt30">
                @foreach (var item in Model)
                {
                    <div class="column col-6 col-sm-12 col-md-12 col-xl-6 mb10">
                        <a href="@Url.Action("Details", "Posts",  new { id=item.ID })">
                            <div class="item d-flex align-middle">
                                <img src="@Url.Content("~/Uploads/Images/" + item.BusinessUser.BusinessLogo)" alt="image-job">
                                <div class="content">
                                    <div class="d-flex align-middle justify-between mb-2">
                                        <h3 class="text-h4 bold-6 mb-0 ellipsis"> @item.Title</h3>
                                        <div class="chip bg-error">
                                            <small class="bold-6">Nổi bật</small>
                                        </div>
                                    </div>
                                    <p class="bold-6 text-italic mb-2"> @item.BusinessUser.BusinessName</p>
                                    <div class="desc d-flex align-middle mb-2">
                                        <span class="mb-0 mr10 text-success">
                                            @if (item.Major_ID != null)
                                            {
                                                <i class="fa-solid fa-tag"></i> @item.Major.Major1
                                            }
                                            else
                                            {

                                            }
                                        </span>
                                        <span class="mb-0 mr10 text-warning">
                                            <i class="fa-solid fa-tag"></i> @item.Form
                                        </span>
                                        <span class="mb-0 mr10 text-muted">
                                            <i class="fa-solid fa-location-dot"></i> @item.BusinessUser.Address
                                        </span>
                                    </div>
                                    <p class="text-primary bold-6">
                                        <i>Hạn nộp: @item.DueDate</i>
                                    </p>
                                </div>
                            </div>
                        </a>

                    </div>
                }
            </div>
            <div class="pagination-container" style="float: right">
                Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) / @Model.PageCount
            </div>
            <div class="center">
                <div class="pagination-container">
                    @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
                </div>
            </div>
        </div>
    </section>

    <section id="employer" class="mb30">
        <div class="container">
            <div class="title-home mb30">
                <h3>Nhà tuyển dụng hàng đầu</h3>
            </div>

            <div class="slider mt30">
                <div class="slide-track">
                    @foreach (var item in ViewBag.MOUs)
                    {
                        <div class="slide">
                            <a href="@Url.Action("Details", "MOUs", new {id = item.ID})">
                                <img src="@Url.Content("~/Uploads/Images/" + item.BusinessUser.BusinessLogo)" alt="employer" />
                            </a>
                        </div>
                    }
                    @foreach (var item in ViewBag.MOUs)
                    {
                        <div class="slide">
                            <a href="@Url.Action("Details", "MOUs", new {id = item.ID})">
                                <img src="@Url.Content("~/Uploads/Images/" + item.BusinessUser.BusinessLogo)" alt="employer" />
                            </a>
                        </div>
                    }
                    @foreach (var item in ViewBag.MOUs)
                    {
                        <div class="slide">
                            <a href="@Url.Action("Details", "MOUs", new {id = item.ID})">
                                <img src="@Url.Content("~/Uploads/Images/" + item.BusinessUser.BusinessLogo)" alt="employer" />
                            </a>
                        </div>
                    }
                </div>
            </div>

        </div>
    </section>

</main>

@section Scripts {
    <script>
        function insertParam() {
            searchString = document.getElementById("searchString").value;
            form = document.getElementById("Form").value;
            console.log(searchString)

            const actionUrl = `@Url.Action("Search", "Posts")`;
            console.log(actionUrl)
            $('#Search').attr('action', `${actionUrl}`)
        }
    </script>
}