@model IEnumerable<BusinessConnectManagement.Models.VanLangUser>

@{
    ViewBag.Title = "Authorize User";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<section class="list">
    <h1 class="list-heading">DANH SÁCH TÀI KHOẢN</h1>
    <div class="list-table">
        <table id="table_id" class="display">

            <thead>
                <tr>
                    <th class="text-center">STT</th>
                    <th class="text-center">Họ và Tên</th>
                    <th class="text-center">Email</th>
                    <th class="text-center">SĐT</th>
                    <th class="text-center">Chức vụ</th>
                    <th class="text-center">Trạng thái</th>
                    <th class="text-center">Chức năng</th>
                </tr>
            </thead>

            <tbody>
                @{ int count = 1;}
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="text-center">@count</td>
                        <td>@Html.DisplayFor(modelItem => item.FullName)</td>
                        <td>@Html.DisplayFor(modelItem => item.Email)</td>
                        <td>@Html.DisplayFor(modelItem => item.Mobile)</td>
                        <td>@Html.DisplayFor(modelItem => item.Role)</td>
                        <td>@item.Status.Status1</td>
                        <td class="text-center">
                            <button class="btn btn-action btn--update"
                                    onclick="loadEditUser('@item.Email', '@item.FullName', '@item.Student_ID', '@item.Mobile', '@item.Role', '@item.Last_Access', '@item.Major_ID', '@item.Status_ID')">
                                Cập nhật
                            </button>
                        </td>
                    </tr>

                    count++;
                }
            </tbody>

        </table>
    </div>
</section>

<form class="form" id="deleteForm" method="post">
</form>

<form class="form" id="addForm" method="post">
</form>

<form action="@Url.Action("Edit", "AdminHome")" method="post" class="form" id="updateForm">

    <div class="form-container">
        <i class="form-icon fas fa-times-circle"></i>
        <h1 class="form-heading">Cập nhật Tài khoản</h1>

        <input name="email" id="email" class="form-input" hidden />
        <input name="Student_ID" id="Student_ID" class="form-input" hidden />
        <input name="Last_Access" id="Last_Access" class="form-input" hidden />
        <input name="Major_ID" id="Major_ID" class="form-input" hidden />

        <div class="form-group">
            <label for="emailVLU" class="form-label">Email</label>
            <input id="emailVLU" name="EmailVLU" class="form-input" autocomplete="off" disabled />
        </div>

        <div class="form-group">
            <label for="FullName" class="form-label">Họ và Tên</label>
            <input id="FullName" name="FullName" class="form-input" autocomplete="off" />
        </div>

        <div class="form-group">
            <label for="Mobile" class="form-label">SĐT</label>
            <input id="Mobile" name="Mobile" class="form-input" autocomplete="off" />
        </div>

        <div class="edit">
            <div class="form-group">
                <label for="Role" class="form-label">Vai trò</label>
                <select name="Role" id="Role" class="form-input">
                    <option value="Admin">Admin</option>
                    <option value="Faculty">Faculty</option>
                    <option value="Mentor">Mentor</option>
                    <option value="Student">Student</option>
                </select>
            </div>
        </div>

        <div class="editStatus">
            <div class="form-group">
                <label for="Status_ID" class="form-label">Trạng thái</label>
                <select name="Status_ID" id="Status_ID" class="form-input">
                    @foreach (var status in ViewBag.StatusList)
                    {
                        <option value=@status.ID>@status.Status1</option>
                    }
                </select>
            </div>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn--add">Lưu</button>
        </div>
    </div>
</form>

<script type="text/javascript">
    function loadEditUser(email, FullName, Student_ID, Mobile, Role, Last_Access, Major_ID, Status_ID) {
        let formUpdate = document.getElementById("updateForm");

        formUpdate.classList.add('is-appear');

        document.getElementById('email').value = email;
        document.getElementById('emailVLU').value = email;
        document.getElementById('FullName').value = FullName;
        document.getElementById('Student_ID').value = Student_ID;
        document.getElementById('Mobile').value = Mobile;
        document.getElementById('Role').value = Role;
        document.getElementById('Last_Access').value = Last_Access;
        document.getElementById('Major_ID').value = Major_ID;
        document.getElementById('Status_ID').value = Status_ID;
    }
</script>